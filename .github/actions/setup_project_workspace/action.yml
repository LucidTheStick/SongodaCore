name: Prepare Workspace
description: Prepares the workspace for compilation

inputs:
  maven_username:
    required: false
    description: The username to use for the Maven server
  maven_password:
    required: false
    description: The password to use for the Maven server

runs:
  using: composite
  steps:
    - uses: craftaro/GH-Commons/.github/actions/setup_workspace@master
      with:
        maven_username: ${{ inputs.maven_username }}
        maven_password: ${{ inputs.maven_password }}

    - uses: actions/setup-java@v4
      with:
        java-version: 17
        distribution: adopt
        overwrite-settings: false

    - uses: SpraxDev/Action-SpigotMC@v5
      with:
        versions: 1.18.1, 1.18.2, 1.19, 1.19.2, 1.19.3, 1.19.4, 1.20.1, 1.20.2, 1.20.4
        remapped: true

    - uses: actions/setup-java@v4
      with:
        java-version: 21
        distribution: adopt
        overwrite-settings: false

    - uses: SpraxDev/Action-SpigotMC@v5
      with:
        versions: 1.20.6
        remapped: true
